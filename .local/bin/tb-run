#!/bin/sh

if [ ! "$(hostname)" = "toolbox" ] && [ ! "$SILVERBLUE" = "" ]; then
	# Proxy to ourselves inside of the toolbox
	exec toolbox run "$0" "$@"
fi

PROG="$0"
if [ "$(basename "$PROG")" = "tb-run" ]; then
	PROG="$1"
	shift
fi

# If we are inside the toolbox, run the wrapped command in a shell
exec "$SHELL" -c "$(basename "$PROG") $*"
